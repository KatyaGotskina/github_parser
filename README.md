### Инструкция по запуску:
1. создать файл .env в одной директории с файлом .env.example, скопировать в него все константы и заполнить их
    - *DB_HOST* хост с бд
    - *DB_PORT* порт для подключения к бд
    - *DB_PASSWORD* пароль для подключения к бд
    - *DB_USER* пользователь для поключения
    - *DB_NAME* имя базы данных
    - *APP_HOST*, *APP_PORT* хост и порт, на которых поднимется fastAPI приложение
    - *SERVICE_ACCOUNT_ID* сервисный аккаунт Яндекс облака, от лица которого будут работать триггеры функций

2. Запустить приложение, подняв *parser/docker-compose.yml*. 
> docker compose up
3. По адресу APP_HOST:APP_PORT/docs можно найти swagger схему для тестирования хендлеров
4. Код приложения лежит в папке parser/app
   

### Создание клауд функций
   
Необходимо запустить скрипт *run_cloud_functions.sh*, который создаст zip-архивы, выгрузит функции в Яндекс Облако, создаст к ним триггеры и удалит архивы с устройства.

В моей реализации есть 2 функции: создание/обновление записей в таблице top100 и  создание/обновление записей в таблице activity
- первая запускается раз в 5 минут (как оказалось на практике, звезды ставят не так уж и часто, и я посчитала интервал в 5 минут достаточным для поддержания актуальности данных)
- вторая должна запускаться чаще, поскольку коммиты могут происходить довольно часто. Однако в моей реализации она запускается раз в 10 минут из-за ограничения кол-ва запросов к публичному github api 
- Функции можно посмотреть в папке crons. 
- вместо логирования в клауд функциях используются обычные принты, поскольку такого требования не было. Однако они используются в качестве "логов"
- Таблицы подразумевают следующую структуру, поскольку в ТЗ не была явно прописана связь таблицы activity и top100:
    + поля activity
      1. **git_id INTEGER REFERENCES top100(id)**
      2. commits INTEGER
      3. authors TEXT[]
      4. date DATE
    + поля top100
      1. **id INTEGER PRIMARY KEY**
      2. repo TEXT
      3. owner TEXT
      4. stars INTEGER
      5. forks INTEGER
      6. watchers INTEGER
      7. open_issues INTEGER
      8. language TEXT
      9. position_cur INTEGER
      10. position_prev INTEGER
      
#### Использованный API
- https://docs.github.com/en/rest/search/search?apiVersion=2022-11-28#search-repositories

